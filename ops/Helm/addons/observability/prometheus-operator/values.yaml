# Common default values for prometheus-operator.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

kube-prometheus-stack:
  enabled: true

  fullnameOverride: prometheus

  prometheus:
    prometheusSpec:
      enableOTLPReceiver: true

      otlp:
        keepIdentifyingResourceAttributes: true
        promoteResourceAttributes:
          - service.instance.id
          - service.name
          - service.namespace
          - service.version
          - cloud.availability_zone
          - cloud.region
          - container.name
          - deployment.environment
          - deployment.environment.name
          - k8s.cluster.name
          - k8s.container.name
          - k8s.cronjob.name
          - k8s.daemonset.name
          - k8s.deployment.name
          - k8s.job.name
          - k8s.namespace.name
          - k8s.pod.name
          - k8s.replicaset.name
          - k8s.statefulset.name

  grafana:
    enabled: false

    sidecar:
      dashboards:
        enableNewTablePanelSyntax: true

  kubeDns:
    enabled: false

  coreDns:
    # disable for GKE
    enabled: true

  prometheusOperator:
    image:
      tag: main

    secretFieldSelector: "type!=kubernetes.io/dockercfg,type!=kubernetes.io/service-account-token,type!=helm.sh/release.v1"

    resources:
      limits:
        cpu: 1
        memory: 512Mi
      requests:
        cpu: 30m
        memory: 50Mi
