apiVersion: v1
kind: Secret
metadata:
  name: pyroscope-datasources
  labels:
    grafana_datasource: 'true' # default value for: sidecar.datasources.label
stringData:
  pyroscope.yaml: |-
    apiVersion: 1
    datasources:
      - name: Pyroscope
        type: grafana-pyroscope-datasource
        uid: pyroscope
        url: http://pyroscope.pyroscope:4040
        editable: false
        jsonData:
          # Enable backend querying for better performance
          backendType: phlare
          # Timeout for queries
          timeout: 60s
          # Enable Profiles Drilldown from traces
          enableProfilesDrilldown: true
          # Enable trace linking
          enableTraceLinking: true
